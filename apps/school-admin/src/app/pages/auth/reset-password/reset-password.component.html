<div class="main-wrapper">
    <div class="account-content">
        <div class="login-wrapper login-new">
            <div class="row w-100">
                <div class="col-lg-5 mx-auto">
                    <div class="login-content user-login">
                        <div class="login-logo">
                            <img src="assets/img/logo.svg" alt="img">
                            <a routerLink="/" class="login-logo logo-white">
                                <img src="assets/img/logo-white.svg" alt="Img">
                            </a>
                        </div>
                        <form (ngSubmit)="onSubmit()">
                            <div class="card">
                                <div class="card-body p-5">
                                    <div class="login-userheading">
                                        <h3>Đặt lại mật khẩu?</h3>
                                        <h4>Nhập mật khẩu mới và xác nhận để truy cập</h4>
                                    </div>

                                    <!-- Success/Error Messages -->
                                    <div *ngIf="message" class="alert mb-3"
                                        [ngClass]="isSuccess ? 'alert-success' : 'alert-danger'">
                                        {{ message }}
                                    </div>

                                    <ng-container *ngIf="!isSuccess">
                                        <div class="mb-3">
                                            <label class="form-label">Mật khẩu mới <span class="text-danger">
                                                    *</span></label>
                                            <div class="pass-group position-relative">
                                                <input [type]="showPassword ? 'text' : 'password'"
                                                    class="pass-input form-control" [(ngModel)]="password"
                                                    name="password" required>
                                                <span
                                                    class="feather-eye toggle-password text-gray-9 position-absolute end-0 top-50 translate-middle-y me-3"
                                                    [ngClass]="showPassword ? 'feather-eye' : 'feather-eye-off'"
                                                    style="cursor: pointer;"
                                                    (click)="togglePasswordVisibility('password')"></span>
                                            </div>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Xác nhận mật khẩu <span class="text-danger">
                                                    *</span></label>
                                            <div class="pass-group position-relative">
                                                <input [type]="showConfirmPassword ? 'text' : 'password'"
                                                    class="pass-input form-control" [(ngModel)]="confirmPassword"
                                                    name="confirmPassword" required>
                                                <span
                                                    class="feather-eye toggle-password text-gray-9 position-absolute end-0 top-50 translate-middle-y me-3"
                                                    [ngClass]="showConfirmPassword ? 'feather-eye' : 'feather-eye-off'"
                                                    style="cursor: pointer;"
                                                    (click)="togglePasswordVisibility('confirmPassword')"></span>
                                            </div>
                                        </div>
                                        <div class="form-login">
                                            <button type="submit" class="btn btn-primary w-100"
                                                [disabled]="isSubmitting">
                                                <span *ngIf="isSubmitting"
                                                    class="spinner-border spinner-border-sm me-1"></span>
                                                Đổi mật khẩu
                                            </button>
                                        </div>
                                    </ng-container>

                                    <div class="signinform text-center mb-0" *ngIf="isSuccess">
                                        <h4>Quay lại <a routerLink="/auth/login" class="hover-a"> đăng nhập </a></h4>
                                    </div>
                                    <div class="signinform text-center mb-0" *ngIf="!isSuccess">
                                        <h4>Quay lại <a routerLink="/auth/login" class="hover-a"> đăng nhập </a></h4>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="my-4 d-flex justify-content-center align-items-center copyright-text">
                        <p>Copyright &copy; 2025 DreamsPOS</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>